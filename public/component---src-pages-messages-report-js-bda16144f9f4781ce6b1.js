(window.webpackJsonp=window.webpackJsonp||[]).push([[6,3],{b7rG:function(e,t,a){"use strict";a.r(t);a("f3/d"),a("dRSK"),a("Vd3H"),a("Z2Ku"),a("L9s1");var n=a("q1tI"),r=a.n(n),l=(a("Wbzz"),a("Fqsg")),s=a("R/WZ"),c=a("/EAt"),o=a("Uf6+"),m=a("3PeG"),i=a("nCZa"),u=a("Imu7"),d=a("wzcM"),g=a("sRsu"),p=a("kKAo"),y=a("wHSu"),E=a("IP2g"),f=function(e,t){var a,l=e.user,c=Object(s.a)({root:{boxShadow:"none","& > *":{borderBottom:"unset"}}})(),o=Object(n.useState)(!1);o[0],o[1];return r.a.createElement(g.a,{className:c.root,key:t},r.a.createElement(m.a,{align:"center"},r.a.createElement("p",{className:"sentmessagereport"},l.status)),r.a.createElement(m.a,{align:"center"},r.a.createElement("p",{className:"sentmessagereport"},l.user)),r.a.createElement(m.a,{align:"center"},(null==l||null===(a=l.status_message)||void 0===a?void 0:a.includes("http"))?r.a.createElement("a",{href:l.status_message,rel:"noopener noreferrer",target:"_blank"},"Location"):l.status_message),r.a.createElement(m.a,{align:"center"},r.a.createElement("div",null,r.a.createElement("p",{style:{fontSize:12,fontFamily:"Open Sans",letterSpacing:"0.41px",textAlign:"right",color:"var(--text-light)",lineHeight:1.33}},new Date(l.sent_datetime).toLocaleDateString()),r.a.createElement("p",{style:{fontSize:12,fontFamily:"Open Sans",letterSpacing:"0.41px",textAlign:"right",color:"var(--text-light)",lineHeight:1.33}},new Date(l.sent_datetime).toLocaleTimeString()))),r.a.createElement(m.a,{align:"center"},r.a.createElement("div",null,r.a.createElement("p",{style:{fontSize:12,fontFamily:"Open Sans",letterSpacing:"0.41px",textAlign:"right",color:"var(--text-light)",lineHeight:1.33}},l.read_datetime?new Date(l.read_datetime).toLocaleDateString():"none"),r.a.createElement("p",{style:{fontSize:12,fontFamily:"Open Sans",letterSpacing:"0.41px",textAlign:"right",color:"var(--text-light)",lineHeight:1.33}},l.read_datetime?new Date(l.read_datetime).toLocaleTimeString():"none"))))};t.default=function(e){var t,a,h,b,v,x,S=e.id,N=Object(n.useContext)(l.a),w=N.report,k=N.secGroups,_=N.sendReportStatus,O=N.downloadReport,D=N.sentBroadcasts,C=(N.sendStatus,Object(n.useState)(0)),j=C[0],z=C[1],F=Object(n.useState)(25),H=F[0],L=(F[1],r.a.useState("desc")),A=L[0],I=L[1],R=r.a.useState("when_sent"),V=R[0],M=R[1],B=r.a.useState([]),G=(B[0],B[1],r.a.useState(!1)),T=(G[0],G[1],r.a.useState(25)),K=T[0],W=(T[1],Object(s.a)({root:{boxShadow:"none",maxHeight:800,"& > *":{borderBottom:"unset"}},theader:{backgroundColor:"#fff",fontFamily:"Open Sans",fontSize:"14px",fontWeight:600,lineHeight:1.14,letterSpacing:"1.28px",color:"var(--text-light)"}})());function Z(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}Math.min(K,D.list.length-j*K);Object(n.useEffect)((function(){_(S,0,25)}),[]);var q,J,P,U,Q=k.find((function(e){var t;return e.id===(null==w||null===(t=w.broadcast)||void 0===t?void 0:t.target)}))||{name:"network"},X=new Date(null==w||null===(t=w.broadcast)||void 0===t?void 0:t.when_sent),Y=0==j?1:j*H+1,$=(null==w||null===(a=w.broadcast)||void 0===a||null===(h=a.report)||void 0===h?void 0:h.length)<H?w.broadcast.report.length:(null==w||null===(b=w.broadcast)||void 0===b?void 0:b.report.length)*(j+1);return r.a.createElement(r.a.Fragment,null,w.broadcast?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{},className:"title-report"},w.broadcast.message),r.a.createElement("p",{className:"subtitle-report"},"Sent on "+X.toLocaleDateString()+" at "+X.toLocaleTimeString()+" to "+Q.name),r.a.createElement("div",{style:{display:"flex",margin:"25px 0"}},r.a.createElement("div",{style:{margin:"0px 15px 0 0"}},r.a.createElement("h2",{className:"summaryVal",style:{margin:0}},Math.max(0,w.broadcast.summary.sent)),r.a.createElement("p",{className:"summary",style:{margin:0}},"sent")),r.a.createElement("div",{style:{margin:"0px 15px 0 0"}},r.a.createElement("h2",{className:"summaryVal",style:{margin:0}},Math.max(0,w.broadcast.summary.ignored)),r.a.createElement("p",{className:"summary",style:{margin:0}},"ignored")),r.a.createElement("div",{style:{margin:"0px 15px 0 0"}},r.a.createElement("h2",{className:"summaryVal",style:{margin:0}},Math.max(0,w.broadcast.summary.read)),r.a.createElement("p",{className:"summary",style:{margin:0}},"read")),r.a.createElement("div",{style:{margin:"0 15px"}},r.a.createElement("h2",{className:"summaryVal",style:{margin:0}},w.broadcast.summary.pending),r.a.createElement("p",{className:"summary",style:{margin:0}},"pending")),r.a.createElement("div",{style:{margin:"0 15px"}},r.a.createElement("h2",{className:"summaryVal",style:{margin:0}},w.broadcast.summary.failed),r.a.createElement("p",{className:"summary",style:{margin:0}},"failed")),r.a.createElement("div",{style:{margin:"0 15px"}},r.a.createElement("h2",{className:"summaryVal",style:{margin:0}},null===(v=w.broadcast.summary)||void 0===v?void 0:v.acked),r.a.createElement("p",{className:"summary",style:{margin:0}},"acknowledged"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignContent:"center",alignItems:"center"}},r.a.createElement("div",null,r.a.createElement("h2",{className:"report-table-title"},"Report")),r.a.createElement("button",{className:"downloadButton",onClick:function(){return O(w.broadcast.message_id,0,25)}},"Download")),r.a.createElement("section",{className:"sentsection",style:{marginTop:"20px",overflow:"scroll"}},r.a.createElement(i.a,{component:p.a,className:W.root},r.a.createElement(c.a,{stickyHeader:!0,"aria-label":"sticky collapsible table"},r.a.createElement(u.a,null,r.a.createElement(g.a,null,r.a.createElement(m.a,{className:W.theader},r.a.createElement(d.a,{active:"when_sent"===V,direction:"when_sent"===V?A:"asc",onClick:(U="when_sent",function(e){!function(e,t){var a=V===t&&"asc"===A;console.log({orderBy:V,property:t,order:A,isAsc:a}),I(a?"desc":"asc"),M(t)}(0,U)})},"Status")),r.a.createElement(m.a,{className:W.theader,align:"center"},"Name"),r.a.createElement(m.a,{className:W.theader,align:"center"},"Message"),r.a.createElement(m.a,{className:W.theader,align:"center"},"Sent"),r.a.createElement(m.a,{className:W.theader,align:"center"},"Read"))),r.a.createElement(o.a,null,null===(q=w.broadcast.report,J=function(e,t){return"desc"===e?function(e,a){return Z(e,a,t)}:function(e,a){return-Z(e,a,t)}}(A,V),(P=q.map((function(e,t){return[e,t]}))).sort((function(e,t){var a=J(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),x=P.map((function(e){return e[0]})))||void 0===x?void 0:x.map((function(e,t){return r.a.createElement(f,{user:e,key:t})}))))),w.broadcast.report.length>0&&r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",margin:"10px 32px"}},r.a.createElement(E.a,{style:{cursor:"pointer"},icon:y.a,onClick:function(){!function(e,t,a){0!==t&&(_(e,t-1,25),z(t-1))}(w.messageID,j)}}),r.a.createElement("p",{style:{margin:"0 20px",fontFamily:"Open Sans",fontSize:"14px"}},Y," - ",$," of ",w.broadcast.report.length),r.a.createElement(E.a,{style:{cursor:"pointer"},icon:y.b,onClick:function(){$<w.broadcast.report.length&&function(e,t,a){_(e,t+1,a),z(t+1)}(w.messageID,j,H)}})))):"loading")}},rNNf:function(e,t,a){"use strict";a.r(t);var n=a("b7rG");t.default=n.default}}]);
//# sourceMappingURL=component---src-pages-messages-report-js-bda16144f9f4781ce6b1.js.map